/*! jQuery Migrate v1.2.1 | (c) 2005, 2013 jQuery Foundation, Inc. and other contributors | jquery.org/license */jQuery.migrateMute===void 0&&(jQuery.migrateMute=!0),function(e,t,n){function r(n){var r=t.console;s[n]||(s[n]=!0,e.migrateWarnings.push(n),r&&r.warn&&!e.migrateMute&&(r.warn("JQMIGRATE: "+n),e.migrateTrace&&r.trace&&r.trace()))}function i(t,i,s,o){if(Object.defineProperty)try{return Object.defineProperty(t,i,{configurable:!0,enumerable:!0,get:function(){return r(o),s},set:function(e){r(o),s=e}}),n}catch(u){}e._definePropertyBroken=!0,t[i]=s}var s={};e.migrateWarnings=[],!e.migrateMute&&t.console&&t.console.log&&t.console.log("JQMIGRATE: Logging is active"),e.migrateTrace===n&&(e.migrateTrace=!0),e.migrateReset=function(){s={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&r("jQuery is not compatible with Quirks Mode");var o=e("<input/>",{size:1}).attr("size")&&e.attrFn,u=e.attr,a=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},f=e.attrHooks.value&&e.attrHooks.value.set||function(){return n},l=/^(?:input|button)$/i,c=/^[238]$/,h=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,p=/^(?:checked|selected)$/i;i(e,"attrFn",o||{},"jQuery.attrFn is deprecated"),e.attr=function(t,i,s,a){var f=i.toLowerCase(),d=t&&t.nodeType;return a&&(4>u.length&&r("jQuery.fn.attr( props, pass ) is deprecated"),t&&!c.test(d)&&(o?i in o:e.isFunction(e.fn[i])))?e(t)[i](s):("type"===i&&s!==n&&l.test(t.nodeName)&&t.parentNode&&r("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[f]&&h.test(f)&&(e.attrHooks[f]={get:function(t,r){var i,s=e.prop(t,r);return s===!0||"boolean"!=typeof s&&(i=t.getAttributeNode(r))&&i.nodeValue!==!1?r.toLowerCase():n},set:function(t,n,r){var i;return n===!1?e.removeAttr(t,r):(i=e.propFix[r]||r,i in t&&(t[i]=!0),t.setAttribute(r,r.toLowerCase())),r}},p.test(f)&&r("jQuery.fn.attr('"+f+"') may use property instead of attribute")),u.call(e,t,i,s))},e.attrHooks.value={get:function(e,t){var n=(e.nodeName||"").toLowerCase();return"button"===n?a.apply(this,arguments):("input"!==n&&"option"!==n&&r("jQuery.fn.attr('value') no longer gets properties"),t in e?e.value:null)},set:function(e,t){var i=(e.nodeName||"").toLowerCase();return"button"===i?f.apply(this,arguments):("input"!==i&&"option"!==i&&r("jQuery.fn.attr('value', val) no longer sets properties"),e.value=t,n)}};var d,v,m=e.fn.init,g=e.parseJSON,y=/^([^<]*)(<[\w\W]+>)([^>]*)$/;e.fn.init=function(t,n,i){var s;return t&&"string"==typeof t&&!e.isPlainObject(n)&&(s=y.exec(e.trim(t)))&&s[0]&&("<"!==t.charAt(0)&&r("$(html) HTML strings must start with '<' character"),s[3]&&r("$(html) HTML text after last tag is ignored"),"#"===s[0].charAt(0)&&(r("HTML string cannot start with a '#' character"),e.error("JQMIGRATE: Invalid selector string (XSS)")),n&&n.context&&(n=n.context),e.parseHTML)?m.call(this,e.parseHTML(s[2],n,!0),n,i):m.apply(this,arguments)},e.fn.init.prototype=e.fn,e.parseJSON=function(e){return e||null===e?g.apply(this,arguments):(r("jQuery.parseJSON requires a valid JSON string"),null)},e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e.browser||(d=e.uaMatch(navigator.userAgent),v={},d.browser&&(v[d.browser]=!0,v.version=d.version),v.chrome?v.webkit=!0:v.webkit&&(v.safari=!0),e.browser=v),i(e,"browser",e.browser,"jQuery.browser is deprecated"),e.sub=function(){function t(e,n){return new t.fn.init(e,n)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(r,i){return i&&i instanceof e&&!(i instanceof t)&&(i=t(i)),e.fn.init.call(this,r,i,n)},t.fn.init.prototype=t.fn;var n=t(document);return r("jQuery.sub() is deprecated"),t},e.ajaxSetup({converters:{"text json":e.parseJSON}});var b=e.fn.data;e.fn.data=function(t){var i,s,o=this[0];return!o||"events"!==t||1!==arguments.length||(i=e.data(o,t),s=e._data(o,t),i!==n&&i!==s||s===n)?b.apply(this,arguments):(r("Use of jQuery.fn.data('events') is deprecated"),s)};var w=/\/(java|ecma)script/i,E=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),E.apply(this,arguments)},e.clean||(e.clean=function(t,i,s,o){i=i||document,i=!i.nodeType&&i[0]||i,i=i.ownerDocument||i,r("jQuery.clean() is deprecated");var u,a,f,l,c=[];if(e.merge(c,e.buildFragment(t,i).childNodes),s)for(f=function(e){return!e.type||w.test(e.type)?o?o.push(e.parentNode?e.parentNode.removeChild(e):e):s.appendChild(e):n},u=0;null!=(a=c[u]);u++)e.nodeName(a,"script")&&f(a)||(s.appendChild(a),a.getElementsByTagName!==n&&(l=e.grep(e.merge([],a.getElementsByTagName("script")),f),c.splice.apply(c,[u+1,0].concat(l)),u+=l.length));return c});var S=e.event.add,x=e.event.remove,T=e.event.trigger,N=e.fn.toggle,C=e.fn.live,k=e.fn.die,L="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",A=RegExp("\\b(?:"+L+")\\b"),O=/(?:^|\s)hover(\.\S+|)\b/,M=function(t){return"string"!=typeof t||e.event.special.hover?t:(O.test(t)&&r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(O,"mouseenter$1 mouseleave$1"))};e.event.props&&"attrChange"!==e.event.props[0]&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),e.event.dispatch&&i(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,n,i,s){e!==document&&A.test(t)&&r("AJAX events should be attached to document: "+t),S.call(this,e,M(t||""),n,i,s)},e.event.remove=function(e,t,n,r,i){x.call(this,e,M(t)||"",n,r,i)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return r("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,n){if(!e.isFunction(t)||!e.isFunction(n))return N.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var i=arguments,s=t.guid||e.guid++,o=0,u=function(n){var r=(e._data(this,"lastToggle"+t.guid)||0)%o;return e._data(this,"lastToggle"+t.guid,r+1),n.preventDefault(),i[r].apply(this,arguments)||!1};for(u.guid=s;i.length>o;)i[o++].guid=s;return this.click(u)},e.fn.live=function(t,n,i){return r("jQuery.fn.live() is deprecated"),C?C.apply(this,arguments):(e(this.context).on(t,this.selector,n,i),this)},e.fn.die=function(t,n){return r("jQuery.fn.die() is deprecated"),k?k.apply(this,arguments):(e(this.context).off(t,this.selector||"**",n),this)},e.event.trigger=function(e,t,n,i){return n||A.test(e)||r("Global events are undocumented and deprecated"),T.call(this,e,t,n||document,i)},e.each(L.split("|"),function(t,n){e.event.special[n]={setup:function(){var t=this;return t!==document&&(e.event.add(document,n+"."+e.guid,function(){e.event.trigger(n,null,t,!0)}),e._data(this,n,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,n+"."+e._data(this,n)),!1}}})}(jQuery,window),function(){window.$K={scrollContainer:!1,loadUrl:function(e){window.Turbolinks&&window.Turbolinks.supported?(e=e.replace(RegExp("https?://"+location.host),""),Turbolinks.visit(e)):location.href=e},pulse:{plugins:{},groups:{},refs:{},overrides:{},teardown:function(){$.each(this.refs,function(e,t){t.kill()}),this.refs={}},register:function(e){this.refs[e.id]&&(this.refs[e.id].kill(),delete this.refs[e.id]);var t="#"+e.id,n=$(t).data("pulse-group");$(t).children(":not(div.cover)").remove(),this.groups[n]||(this.groups[n]=e.options);var r=this.groups[n],i=["width","height","dataUrl","data","next","previous"];return r.link_to===undefined&&i.push("link_to"),this.overrides[e.id]||(this.overrides[e.id]={}),$.each(i,$.proxy(function(t,n){e.options[n]&&(this.overrides[e.id][n]=e.options[n])},this)),this.refs[e.id]=Pulse(t,$.extend(r,this.overrides[e.id])),$.each(this.plugins,$.proxy(function(t,n){r[t+"_enabled"]&&this.refs[e.id][t](r)},this)),this.refs[e.id]}},navigation:{sets:[],init:!1,toggleChilds:function(e,t){var n=t&&t==="none"||$(e).hasClass("k-nav-open"),r=e.siblings("ul");if(!r.length)return;n?$(e).removeClass("k-nav-open"):$(e).addClass("k-nav-open"),r.css("display",n?"none":"block")},nest:function(){var e=$("a.k-nav-set"),t=this;if(this.sets.length===e.length)return;this.sets=e,$.each(this.sets,$.proxy(function(e,t){t.onclick===null&&(t.onclick=$.proxy(function(e){$(".k-nav-current").removeClass("k-nav-current"),this.toggleChilds($(t)),e.preventDefault()},this))},this)),this.setCurrent()},setCurrent:function(e){var t=RegExp("(http://"+location.host+")?"+$K.location.root_folder+"(/(index|preview).php)?"),e=e||location.href,n=e.replace(t,"").replace(/&rand=.*$/,"")||"/";$.each(this.sets,$.proxy(function(e,t){this.toggleChilds($(t),"none")},this)),$(".k-nav-current").removeClass("k-nav-current"),$.each($(".k-nav-root a:not(.k-nav-set)"),$.proxy(function(e,r){r=$(r);var i=r.attr("href").replace(t,"");if(n===i){r.addClass("k-nav-current");for(;;){r=r.parent();if(r.hasClass("k-nav-root"))break;r.get(0).nodeName.toLowerCase()==="ul"&&r.show()}}},this))}},keyboardBind:function(){$("[data-bind-to-key]").each(function(){var e=$(this),t=e.attr("data-bind-to-key");t.indexOf("→")!==-1&&(t=t.replace("→","right")),t.indexOf("←")!==-1&&(t=t.replace("←","left")),key.unbind(t),key(t,function(t,n){var r=e.attr("href");if(!r||r==="#"){e.trigger("click");return}if(location.pathname===r||location.href===r)return;var i=$._data(e.get(0),"events")&&$._data(e.get(0),"events").click;if(!i){var s=$._data(document,"events");s&&s.click&&$.each(s.click,function(t,n){if($.inArray(e.get(0),$(n.selector))!==-1)return i=!0,!1})}i?e.trigger("click"):e.attr("data-koken-internal")!==undefined?$K.loadUrl(r):location.href=r})})},keyboardScroll:function(e,t){t=t||0;var n=$(e),r=n.length-1,i=0,s=!1,o,u=function(n){if(n===37&&i===0||n===39&&i===r||n!==37&&n!==39)return;n===37?i--:n===39&&i++;var s=$(e).get(i).offsetTop+t;return $("html,body").animate({scrollTop:s}),!1};$(document).off(".kScroll").on("scroll.kScroll",function(){n.each(function(e,n){if($(n).offset().top+t>=$(document).scrollTop())return i=e,!1})}).on("keydown.kScroll",function(e){u(e.which)})},lazy:{queue:[],working:[],fails:{},max:4,out:function(e){$K.lazy.working.splice($.inArray(e,$K.lazy.working),1),$K.lazy.worker()},fail:function(e){$K.lazy.fails[e]?$K.lazy.fails[e]++:$K.lazy.fails[e]=1,$K.lazy.fails[e]<3&&$K.lazy.queue.push(e),$K.lazy.out(e)},worker:function(){if($K.lazy.queue.length&&$K.lazy.working.length<$K.lazy.max){var e=$K.lazy.queue.shift(),t=$('img.k-lazy-loading[data-src="'+e+'"]').add('.k-lazy-loading-background[data-src="'+e+'"]'),n=new Image;if($K.lazy.fails[e]&&$K.lazy.fails[e]>2)return;$K.lazy.working.push(e),n.onerror=function(){$K.lazy.fail(e)},n.onload=function(){var n=t.filter("img"),r=t.filter(".k-lazy-loading-background");n.removeClass("k-lazy-loading"),r.removeClass("k-lazy-loading-background");var i=n.first().data("lazy-fade");i&&n.css("opacity",.001),i=r.first().data("lazy-fade"),i&&r.each(function(){$(this).find("i.k-bg-fader").remove();var e=$(this).html();$(this).empty().css("position","relative"),$("<i/>").addClass("k-bg-fader").css({width:"100%",height:"100%","float":"left",backgroundPosition:$(this).css("background-position"),opacity:0,backgroundRepeat:"no-repeat",zIndex:1}).appendTo($(this)),$("<span>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:2}).html(e).appendTo($(this))}),setTimeout(function(){$K.lazy.out(e),n.addClass("k-lazy-loaded"),n.attr("src",e),n.animate({opacity:1},i,null,function(){$(this).trigger("k-image-loaded")}),r.each(function(){$(this).addClass("k-lazy-background-loaded"),i?$(this).find("i.k-bg-fader").css("backgroundImage","url("+e+")").animate({opacity:1},i,null,function(){$(this).trigger("k-background-loaded")}):($(this).css("backgroundImage","url("+e+")"),$(this).trigger("k-background-loaded"))})},0)},n.src=e,$K.lazy.worker()}},load:function(){var e=$(window).height()*1.3+$(window).scrollTop(),t=$(window).width()*2+$(window).scrollLeft(),n=this;$K.lazy.queue=[],$.each($("img.k-lazy-loading").add(".k-lazy-loading-background"),function(n,r){r=$(r);if(!r.attr("data-src")||!r.is(":visible"))return;var i=r.offset();if(i.top<=e&&i.top+r.height()>=$(window).scrollTop()&&i.left<=t&&i.left+r.width()>=$(window).scrollLeft()){var s=r.attr("data-src");$.inArray(s,$K.lazy.queue)===-1&&$K.lazy.queue.push(s)}}),$K.lazy.worker()},init:function(){var e=$("img.k-lazy-loading"),t=$(".k-lazy-loading-background");e.length&&$.each(e,function(e,t){$(t).attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")}),(e.length||t.length)&&setTimeout(function(){$K.lazy.load()},100)}},isRetinaCache:null,isRetina:function(){return this.isRetinaCache!==null?this.isRetinaCache:(this.isRetinaCache=$K.retinaEnabled&&("devicePixelRatio"in window&&devicePixelRatio>1||"matchMedia"in window&&matchMedia("(min-resolution:144dpi)").matches),this.isRetinaCache)},retinafyUrl:function(e){e=e.replace(".2x.",".");if(this.isRetina()){var t=e.lastIndexOf(".");e=e.substr(0,t)+".2x"+e.substr(t)}return e},layout:{mosaic:function(e){e=e||"ul.k-mosaic";var t=$(e);if(t.length){var n=function(){t.each(function(e,t){var n=t.className.match(/k-mosaic-(\d+)/)[1],r=$(t),i=r.children(),s=i.filter(":not(.k-mosaic-uneven)"),o=s.length,u=i.length,a=u%n,f=r.width(),l=f/n,c=0,h=parseInt(i.first().css("margin-right"),10);i.css({width:Math.floor(l-(n-1)/n*h),height:l});if(a!==0){var p=$($.makeArray(i).reverse().slice(0,a));h=Math.ceil((p.length-1)/p.length*h),p.addClass("k-mosaic-uneven").css({width:Math.min(f,Math.floor(f*(100/a)/100-h))})}var d=0,v=1;$.each(r.children(),function(e,t){d+=$(t).outerWidth(!0),v==n||u===e+1?(d<f&&$(t).width($(t).width()+(f-d)),d=0,v=1):v++})}),$K.responsiveBackgrounds(),$K.lazy.init()};$(window).on("k-resize",n),n()}}},loadImages:function(){var e=$("img[data-src]"),t=this;e.length&&$.each(e,function(e,n){var r=$(n),i=t.retinafyUrl(r.attr("data-src"));r.hasClass("k-lazy-loading")?r.attr("data-src",i):r.attr("src",i)})},resizeVideos:function(){$(".mejs-container video").each(function(){$v=$(this);var e=$v.data("aspect"),t=Math.min($v.parents(".mejs-container").parent().width(),$v.data("width")),n=t/e,r=this.player;r&&(r.setPlayerSize(t,n),r.setControlsSize());if(this.pluginType==="native"){var i={width:t,height:n};$v.attr(i).css(i)}else r&&(r.options.videoWidth=t,r.options.videoHeight=n/e,r.media.setVideoSize&&r.media.setVideoSize(t,n))})},responsiveBackgrounds:function(){var e=$("[data-bg-presets]"),t=this;$.each(e,function(){var e=$(this),n=e.width(),r=e.height(),i=n/r,s=n>=r?"width":"height",o=!1,u,a=/([a-z_\.]+)\,([0-9]+)\,([0-9]+)/g,f=e.data("bg-presets"),l=e.data("position")||"focal",c=e.css("background-image"),h=e.data("aspect"),p={backgroundRepeat:"no-repeat",backgroundSize:"cover"};if(n===0||r===0)return;if(l==="focal"){var d=e.data("focal-point").split(","),v=50,m=49;i>=h?m=d[1]:v=d[0],p.backgroundPosition=v+"% "+m+"%"}else p.backgroundPosition=l;while(u=a.exec(f)){o=t.retinafyUrl(e.data("base")+u[1]+"."+e.data("extension"));if(u[2]>=n&&u[3]>=r)break}e.hasClass("k-lazy-loading-background")?e.attr("data-src",o):(o="url("+o+")",o&&o!==c&&(p.backgroundImage=o)),e.css(p)})},responsiveImages:function(){var e=$("img[data-presets]"),t=e.length,n=this,r,i,s,o,u,a,f,l,c,h=$.browser.msie||/Trident\/7\./.test(navigator.userAgent);$.each(e,function(e,t){t=$(t),typeof t.data("originalDom")=="object"&&(t=t.replaceWith(t.data("originalDom")),t.css("opacity",1))}),window.setTimeout(function(){e=$("img[data-presets]").filter(function(){return $(this).css("display")!=="none"&&$(this).css("visibility")!=="hidden"}),$.each(e,function(e,t){t=$(t),$(document).trigger("k-img-resize-start",t),typeof t.data("originalDom")=="object"&&(t=t.replaceWith(t.data("originalDom")));var r=t.data("presets"),i=t.attr("src")||"",a=h||t.css("width").indexOf("%")!==-1?0:parseInt(t.css("width"),10)||0,p=h||t.css("height").indexOf("%")!==-1?0:parseInt(t.css("height"),10)||0,d=0,v=t,m;a<10&&(a=0),p<10&&(p=0);while(d===0){v=v.parent();var g=v.css("display");if(g==="none")return;g!="inline"&&!v.attr("data-koken-ignore-responsive")&&(d=v.width())}c=v.css("box-sizing");var y=p>0?p:v.height(),b=t.css("max-height"),w=parseInt(t.css("max-height"),10);b.indexOf("%")!==-1&&(w=y*(w/100)),t.data("originalDom")||(a>0&&a!==d?(t.data("originalDom",t.clone()),d=Math.min(d,a)):t.data("originalDom","noreplace")),l=t.data("respond-to")||"width",isNaN(w)||(y=w,l==="width"&&(l=!1));var E=d/y,S,x=/([a-z_\.]+)\,([0-9]+)\,([0-9]+)/g;s=t.data("base"),o=t.data("extension"),cropTo=t.data("retain-aspect")||!1,t.attr("data-alt")&&(t.attr("alt",t.data("alt")),t.attr("data-alt",null));if(cropTo){var T=cropTo.split(":");E=T[0]/T[1],y=Math.round(d/E),t.attr("width",d),t.attr("height",y);var N=i.match(/[\,\/]([0-9]+)/);if(N){var C=Math.abs(d-N[1]);if(C/N[1]<.2)return}var k=Math.max(d,y),L={tiny:60,small:100,medium:480,medium_large:800,large:1024,xlarge:1600,huge:2048},A="",O=!1;$.each(L,function(e,t){if(k<=t){var n=t-k;if(!O||k-O>n)A=e;return!1}A=e,O=t}),A=$K.imageDefaults[A],i=s+d+"."+y+"."+A.quality+"."+Math.round(A.sharpening*100)+".crop."+o}else{var M=!1,_=!1,D=0;while(S=x.exec(r)){u=S[1].indexOf(".crop")!==-1,f=S[2]/S[3],i=s+S[1]+"."+o,M=_=!1;if(u){if(l==="width"){if(S[2]>=d){D=d;break}}else if(l==="height"||w){if(S[3]>=y){D=y;break}}else if(S[2]>=d&&S[3]>=y){D=Math.min(d,y);break}}else if(l==="width"){if(S[2]>=d){t.attr("width",d),t.attr("height",Math.ceil(d/f));break}}else if(l==="height"){if(S[3]>=y){t.attr("height",y),t.attr("width",Math.ceil(y*f));break}}else{if(f>=E&&S[2]>=d){t.attr("width",d),t.attr("height",d/f);break}if(f<E&&S[3]>=y){t.attr("height",y),t.attr("width",Math.ceil(y*f));break}}M=S[2],_=S[3]}u?(t.attr("width",D),t.attr("height",D)):M&&(l==="height"&&_<y&&(_=y,M=Math.ceil(y*f)),t.attr("width",M),t.attr("height",_))}i=n.retinafyUrl(i),(t.hasClass("k-lazy-loading")||t.hasClass("k-lazy-loaded"))&&i!==t.attr("src")?(t.removeClass("k-lazy-loaded"),t.addClass("k-lazy-loading"),t.attr("data-src",i),t.attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")):t.attr("src",i),$(document).trigger("k-img-resize",t)}),setTimeout(function(){$K.lazy.init(),$(window).trigger("k-resize")},1)},1)},infinity:{$target:!1,isLoading:!1,bttn:!1,next:function(){if($K.location.parameters.page<this.totalPages){$(window).trigger("k-infinite-loading"),$K.location.parameters.page++,this.isLoading=!0;var e=this,t=location.href.match(/&preview=.*/)||"";$.ajax({url:$K.location.root+$K.location.here.replace(/\/$/,"")+"/page/"+$K.location.parameters.page+"/"+t,success:function(t){e.$target.before($(t).find(".k-infinite-load").children()),e.isLoading=!1,$(window).trigger("k-infinite-loaded"),$K.ready(),e.check()}}),$K.location.parameters.page===this.totalPages&&this.bttn&&this.bttn.addClass("k-disabled")}},check:function(){this.$target&&!this.isLoading&&this.$target.prev().length&&this.$target.prev().offset().top<$(window).scrollTop()+$(window).height()&&this.next()},init:function(){if(this.$target)return;var e=$("span.k-infinite-load").first();if(e.length){e.append($("<br/>").css("display","none").addClass("k-infinite-marker")),e.replaceWith(e.html()),this.$target=$(".k-infinite-marker").first();if(this.selector!==""){var t=$(this.selector),n=this;this.bttn=t,t.length&&(this.totalPages>1?t.on("click",function(){n.next()}):t.remove())}}}},textPreview:function(e){var t=this.location.host+this.location.real_root_folder+"/admin/#/text/selection:"+e;$("<div/>").attr("id","k_essay_preview").html('You are previewing a draft of this essay. <a href="'+t+'" title="Return to the console">Go back and make edits</a>.').prependTo("body")},ready:function(){$("noscript").remove(),$("time.k-relative-time").timeago(),$K.responsiveImages(),$K.responsiveBackgrounds(),$K.loadImages(),$K.lazy.init(),$K.navigation.nest(),$K.infinity.init(),$K.keyboardBind(),$K.layout.mosaic(),$("img").off(".kjs").on("error.kjs",function(){var e=$(this),t=e.data("fails")||0;$K.lazy.working.splice($.inArray(e.attr("src"),$K.lazy.working),1),t<3&&(t++,e.attr("data-src")||e.attr("data-src",e.attr("src")),e.removeClass("k-lazy-loaded").addClass("k-lazy-loading"),setTimeout(function(){$K.lazy.init()},100),e.data("fails",t))}),$(window).off(".kjs");var e,t=$(window).add("body");$K.scrollContainer&&(t=t.add($($K.scrollContainer))),t.off(".kjs").on("scroll.kjs",function(){clearTimeout(e),e=setTimeout(function(){$K.lazy.load(),$K.infinity.bttn||$K.infinity.check(),$(window).trigger("k-scroll")},150)});var n;$(window).on("resize.kjs",function(){$K.resizeVideos(),clearTimeout(n),n=setTimeout(function(){$K.responsiveImages(),$K.responsiveBackgrounds(),$(window).trigger("k-resize")},250)}),$K.infinity.bttn||$K.infinity.check(),$(".k-content-embed").fitVids(),$(".k-content-embed iframe").show(),$(".k-select").off("change").on("change",function(){if($(this).val()==="__label__")return;$K.loadUrl($K.location.root+$(this).val()+($K.location.preview?"&preview="+$K.location.preview:""))});var r=RegExp("https?://"+location.host+$K.location.root_folder+"(/(index|preview).php\\?)?"),i=document.referrer.replace(r,"");i.indexOf("http:")===0&&(i=!1);if($K.location.urls.album){var s=RegExp($K.location.urls.album.replace(/:[a-z_]+/,"[^/]+")+"/lightbox/?$");s.test(i)&&(i=i.replace(/\/lightbox\/?$/,""))}/\/lightbox\/?$/.test(i)&&$.cookie("koken_referrer")?i=$.cookie("koken_referrer"):/\/lightbox\/?$/.test(i)||$.cookie("koken_referrer",i,{path:"/"}),$K.location.referrer=i,$(document).trigger("k-ready")}},$(document).ready(function(){(!window.Turbolinks||!window.Turbolinks.supported)&&$K.ready(),$(window).on("k-pjax-end",function(){var e=$("body").attr("class")||"";$("body").attr("class",e.replace(/k\-source\-([^\s]+)(\sk\-lens\-([^\s]+))?/,$K.location.page_class)),$K.navigation.setCurrent()}),$(window).on("pjax:transition:start pjax:transition:restore",function(){$K.ready()}),$(document).on("page:fetch pjax:start",function(){$(".mejs-container video").each(function(){$(this).parents("#pjax-container-staging").length===0&&(this.player.remove(),$(this).remove())}),$K.lazy.queue=[],$K.infinity.$target=!1,$K.pulse.teardown(),$(document).trigger("k-page-fetch")}),$(document).on("page:change",function(){$K.ready(),$(document).trigger("k-page-change")}),$(document).on("page:restore",function(){$(document).trigger("k-page-restore")})})}(),function(e){"use strict";e.fn.fitVids=function(t){var n={customSelector:null},r=document.createElement("div"),i=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];return r.className="fit-vids-style",r.innerHTML="&shy;<style>               .fluid-width-video-wrapper {                 width: 100%;                              position: relative;                       padding: 0;                            }                                                                                   .fluid-width-video-wrapper iframe,        .fluid-width-video-wrapper object,        .fluid-width-video-wrapper embed {           position: absolute;                       top: 0;                                   left: 0;                                  width: 100%;                              height: 100%;                          }                                       </style>",e(".fit-vids-style").length<=0&&i.parentNode.insertBefore(r,i),t&&e.extend(n,t),this.each(function(){var t=["iframe[src*='player.vimeo.com']","iframe[src*='www.youtube.com']","iframe[src*='www.youtube-nocookie.com']","iframe[src*='www.kickstarter.com']","object","embed"];n.customSelector&&t.push(n.customSelector);var r=e(this).find(t.join(","));r.each(function(){var t=e(this);if(this.tagName.toLowerCase()==="embed"&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)return;var n=this.tagName.toLowerCase()==="object"||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height(),r=t.attr("width"),i=isNaN(parseInt(r,10))?t.width():parseInt(r,10),s=n/i;if(!t.attr("id")){var o="fitvid"+Math.floor(Math.random()*999999);t.attr("id",o)}t.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",s*100+"%"),r&&t.parent(".fluid-width-video-wrapper").wrap('<div class="k-video max-width-video-wrapper"></div>').parent(".max-width-video-wrapper").css("max-width",r+"px"),t.removeAttr("height").removeAttr("width")})})}}(jQuery),function(e){function t(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function n(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function r(e){for(b in E)E[b]=e[k[b]]}function i(e,n){var i,s,o,a,f;i=e.keyCode,t(C,i)==-1&&C.push(i);if(i==93||i==224)i=91;if(i in E){E[i]=!0;for(o in x)x[o]==i&&(u[o]=!0);return}r(e);if(!u.filter.call(this,e))return;if(!(i in w))return;for(a=0;a<w[i].length;a++){s=w[i][a];if(s.scope==n||s.scope=="all"){f=s.mods.length>0;for(o in E)if(!E[o]&&t(s.mods,+o)>-1||E[o]&&t(s.mods,+o)==-1)f=!1;(s.mods.length==0&&!E[16]&&!E[18]&&!E[17]&&!E[91]||f)&&s.method(e,s)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function s(e){var n=e.keyCode,r,i=t(C,n);i>=0&&C.splice(i,1);if(n==93||n==224)n=91;if(n in E){E[n]=!1;for(r in x)x[r]==n&&(u[r]=!1)}}function o(){for(b in E)E[b]=!1;for(b in x)u[b]=!1}function u(e,t,n){var r,i,s,o;r=v(e),n===undefined&&(n=t,t="all");for(s=0;s<r.length;s++)i=[],e=r[s].split("+"),e.length>1&&(i=m(e),e=[e[e.length-1]]),e=e[0],e=N(e),e in w||(w[e]=[]),w[e].push({shortcut:r[s],scope:t,method:n,key:r[s],mods:i})}function a(e,t){var r=e.split("+"),i=[],s,o;r.length>1&&(i=m(r),e=r[r.length-1]),e=N(e),t===undefined&&(t=p());if(!w[e])return;for(s in w[e])o=w[e][s],o.scope===t&&n(o.mods,i)&&(w[e][s]={})}function f(e){return typeof e=="string"&&(e=N(e)),t(C,e)!=-1}function l(){return C.slice(0)}function c(e){var t=(e.target||e.srcElement).tagName;return t!="INPUT"&&t!="SELECT"&&t!="TEXTAREA"}function h(e){S=e||"all"}function p(){return S||"all"}function d(e){var t,n,r;for(t in w){n=w[t];for(r=0;r<n.length;)n[r].scope===e?n.splice(r,1):r++}}function v(e){var t;return e=e.replace(/\s/g,""),t=e.split(","),t[t.length-1]==""&&(t[t.length-2]+=","),t}function m(e){var t=e.slice(0,e.length-1);for(mi=0;mi<t.length;mi++)t[mi]=x[t[mi]];return t}function g(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,function(){n(window.event)})}function y(){var t=e.key;return e.key=L,t}var b,w={},E={16:!1,18:!1,17:!1,91:!1},S="all",x={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},T={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},N=function(e){return T[e]||e.toUpperCase().charCodeAt(0)},C=[];for(b=1;b<20;b++)T["f"+b]=111+b;var k={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(b in x)u[b]=!1;g(document,"keydown",function(e){i(e,S)}),g(document,"keyup",s),g(window,"focus",o);var L=e.key;e.key=u,e.key.setScope=h,e.key.getScope=p,e.key.deleteScope=d,e.key.filter=c,e.key.isPressed=f,e.key.getPressedKeyCodes=l,e.key.noConflict=y,e.key.unbind=a,typeof module!="undefined"&&(module.exports=key)}(this),function(e){function n(e){return e}function r(e){return decodeURIComponent(e.replace(t," "))}function i(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s.json?JSON.parse(e):e}catch(t){}}var t=/\+/g,s=e.cookie=function(t,o,u){if(o!==undefined){u=e.extend({},s.defaults,u);if(typeof u.expires=="number"){var a=u.expires,f=u.expires=new Date;f.setDate(f.getDate()+a)}return o=s.json?JSON.stringify(o):String(o),document.cookie=[s.raw?t:encodeURIComponent(t),"=",s.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}var l=s.raw?n:r,c=document.cookie.split("; "),h=t?undefined:{};for(var p=0,d=c.length;p<d;p++){var v=c[p].split("="),m=l(v.shift()),g=l(v.join("="));if(t&&t===m){h=i(g);break}t||(h[m]=i(g))}return h};s.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==undefined?(e.cookie(t,"",e.extend(n,{expires:-1})),!0):!1}}(jQuery),function(e){function n(){var t=r(this);return isNaN(t.datetime)||e(this).text(i(t.datetime)),this}function r(n){n=e(n);if(!n.data("timeago")){n.data("timeago",{datetime:t.datetime(n)});var r=e.trim(n.text());r.length>0&&n.attr("title",r)}return n.data("timeago")}function i(e){return t.inWords(s(e))}function s(e){return(new Date).getTime()-e.getTime()}e.timeago=function(t){return t instanceof Date?i(t):typeof t=="string"?i(e.timeago.parse(t)):i(e.timeago.datetime(t))};var t=e.timeago;e.extend(e.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(t){function l(r,i){var s=e.isFunction(r)?r(i,t):r,o=n.numbers&&n.numbers[i]||i;return s.replace(/%d/i,o)}var n=this.settings.strings,r=n.prefixAgo,i=n.suffixAgo;this.settings.allowFuture&&t<0&&(r=n.prefixFromNow,i=n.suffixFromNow);var s=Math.abs(t)/1e3,o=s/60,u=o/60,a=u/24,f=a/365,c=s<45&&l(n.seconds,Math.round(s))||s<90&&l(n.minute,1)||o<45&&l(n.minutes,Math.round(o))||o<90&&l(n.hour,1)||u<24&&l(n.hours,Math.round(u))||u<42&&l(n.day,1)||a<30&&l(n.days,Math.round(a))||a<45&&l(n.month,1)||a<365&&l(n.months,Math.round(a/30))||f<1.5&&l(n.year,1)||l(n.years,Math.round(f));return e.trim([r,c,i].join(n.wordSeparator))},parse:function(t){var n=e.trim(t);return n=n.replace(/\.\d\d\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)},datetime:function(n){var r=e(n).get(0).tagName.toLowerCase()==="time",i=r?e(n).attr("datetime"):e(n).attr("title");return t.parse(i)}}),e.fn.timeago=function(){var e=this;e.each(n);var r=t.settings;return r.refreshMillis>0&&setInterval(function(){e.each(n)},r.refreshMillis),e},document.createElement("abbr"),document.createElement("time")}(jQuery);